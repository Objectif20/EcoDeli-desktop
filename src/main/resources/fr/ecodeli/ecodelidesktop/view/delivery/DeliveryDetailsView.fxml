<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<ScrollPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="fr.ecodeli.ecodelidesktop.delivery.DeliveryDetailsController"
            stylesheets="@delivery-detail.css"
            fitToWidth="true">
    <content>
        <VBox spacing="25.0" styleClass="main-container">
            <padding>
                <Insets top="30.0" right="30.0" bottom="30.0" left="30.0"/>
            </padding>

            <!-- Header avec gradient -->
            <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-section">
                <padding>
                    <Insets top="20.0" right="25.0" bottom="20.0" left="25.0"/>
                </padding>
                <Button onAction="#handleRetour" styleClass="back-button" text="← Retour" />
                <VBox spacing="5.0">
                    <Label fx:id="titleLabel" styleClass="page-title" text="Détails de la livraison" />
                    <Label fx:id="deliveryIdLabel" styleClass="delivery-id" text="Référence: LIV-2024-001" />
                </VBox>
            </HBox>

            <!-- Contenu principal -->
            <HBox spacing="30.0" alignment="TOP_LEFT">
                <!-- Colonne principale -->
                <VBox spacing="25.0" HBox.hgrow="ALWAYS">

                    <!-- Section Itinéraire -->
                    <VBox spacing="20.0" styleClass="card-container">
                        <padding>
                            <Insets top="25.0" right="25.0" bottom="25.0" left="25.0"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                            <Label styleClass="section-icon" text="🚚" />
                            <Label styleClass="section-title" text="Itinéraire de livraison" />
                        </HBox>

                        <HBox spacing="20.0" alignment="TOP_LEFT">
                            <!-- Timeline visuelle -->
                            <VBox alignment="CENTER" spacing="0.0" styleClass="timeline">
                                <Region styleClass="timeline-dot start-dot" />
                                <Region styleClass="timeline-line" />
                                <Region styleClass="timeline-dot end-dot" />
                            </VBox>

                            <!-- Informations de trajet -->
                            <VBox spacing="40.0" VBox.vgrow="ALWAYS">
                                <!-- Départ -->
                                <VBox spacing="8.0" styleClass="location-info">
                                    <HBox alignment="CENTER_LEFT" spacing="8.0">
                                        <Label styleClass="location-icon start" text="📍" />
                                        <Label styleClass="location-label start" text="DÉPART" />
                                    </HBox>
                                    <Label fx:id="departureLabel" styleClass="location-address" text="Paris - 123 Rue de Rivoli" />
                                    <HBox spacing="8.0" alignment="CENTER_LEFT">
                                        <Label styleClass="date-icon" text="📅" />
                                        <Label fx:id="departureDateLabel" styleClass="date-text" text="15/01/2024 - 09:00" />
                                    </HBox>
                                </VBox>

                                <!-- Arrivée -->
                                <VBox spacing="8.0" styleClass="location-info">
                                    <HBox alignment="CENTER_LEFT" spacing="8.0">
                                        <Label styleClass="location-icon end" text="🏁" />
                                        <Label styleClass="location-label end" text="ARRIVÉE" />
                                    </HBox>
                                    <Label fx:id="arrivalLabel" styleClass="location-address" text="Lyon - 456 Avenue de la République" />
                                    <HBox spacing="8.0" alignment="CENTER_LEFT">
                                        <Label styleClass="date-icon" text="📅" />
                                        <Label fx:id="arrivalDateLabel" styleClass="date-text" text="15/01/2024 - 15:30" />
                                    </HBox>
                                </VBox>
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- Section Colis -->
                    <VBox spacing="20.0" styleClass="card-container">
                        <padding>
                            <Insets top="25.0" right="25.0" bottom="25.0" left="25.0"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                            <Label styleClass="section-icon" text="📦" />
                            <Label styleClass="section-title" text="Colis à livrer" />
                            <Label fx:id="packageCountLabel" styleClass="package-count" text="(3)" />
                        </HBox>

                        <VBox fx:id="packagesContainer" spacing="15.0" />
                    </VBox>
                </VBox>

                <!-- Sidebar droite -->
                <VBox spacing="25.0" minWidth="320.0" maxWidth="320.0">

                    <!-- Résumé financier -->
                    <VBox spacing="20.0" styleClass="card-container summary-card">
                        <padding>
                            <Insets top="25.0" right="25.0" bottom="25.0" left="25.0"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                            <Label styleClass="section-icon" text="💰" />
                            <Label styleClass="section-title" text="Résumé financier" />
                        </HBox>

                        <VBox fx:id="priceBreakdownContainer" spacing="12.0" />

                        <Separator styleClass="price-separator" />

                        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="total-price-container">
                            <Label styleClass="total-label" text="Total" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Label fx:id="totalPriceLabel" styleClass="total-price" text="89,50 €" />
                        </HBox>
                    </VBox>

                    <!-- Statut de livraison -->
                    <VBox spacing="20.0" styleClass="card-container status-card">
                        <padding>
                            <Insets top="25.0" right="25.0" bottom="25.0" left="25.0"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                            <Label styleClass="section-icon" text="📊" />
                            <Label styleClass="section-title" text="Statut" />
                        </HBox>

                        <VBox spacing="15.0">
                            <HBox alignment="CENTER_LEFT" spacing="12.0">
                                <Label styleClass="status-icon" text="🛒" />
                                <VBox spacing="3.0">
                                    <Label styleClass="status-label" text="Lâcher de chariot" />
                                    <HBox alignment="CENTER_LEFT" spacing="8.0">
                                        <Label fx:id="cartDroppedIcon" styleClass="status-value-icon success" text="✓" />
                                        <Label fx:id="cartDroppedLabel" styleClass="status-value success" text="Oui" />
                                    </HBox>
                                </VBox>
                            </HBox>

                            <!-- Statut en cours -->
                            <VBox spacing="12.0" styleClass="current-status">
                                <HBox alignment="CENTER_LEFT" spacing="8.0">
                                    <Region styleClass="status-indicator" />
                                    <Label styleClass="current-status-label" text="En cours de livraison" />
                                </HBox>
                                <Label styleClass="status-description" text="Votre colis est actuellement en transit vers sa destination." />
                            </VBox>
                        </VBox>
                    </VBox>
                </VBox>
            </HBox>
        </VBox>
    </content>
</ScrollPane>
